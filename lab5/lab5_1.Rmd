---
title: "Lab 5.1"
date: "`r Sys.Date()`"
output:
  html_document:
    theme: spacelab
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
---

## Learning Goals
*At the end of this exercise, you will be able to:*    
1. Use the `select()` function of `dplyr` to build data frames restricted to variables of interest.  
2. Use the `rename()` function to provide new, consistent names to variables in data frames.  

## Load the tidyverse
```{r}
library("tidyverse")
library("palmerpenguins") #load the palmerpenguins package
```

## Palmerpenguins
These data are from: Gorman KB, Williams TD, Fraser WR (2014). Ecological sexual dimorphism and environmental variability within a community of Antarctic penguins (genus _Pygoscelis_). PLoS ONE 9(3):e90081. https://doi.org/10.1371/journal.pone.0090081

## Data Structure
Once data have been uploaded, let's get an idea of its structure, contents, and dimensions.  
```{r}

```

```{r}

```

## Tidyverse
Recall that the [tidyverse](www.tidyverse.org) is a collection of packages that make workflow in R easier. The packages operate more intuitively than base R commands and share a common organizational philosophy. In lab 4, we learned how to use `ggplot2` to make visualization of data easier. In this lab, we will learn how to use the package `dplyr` to wrangle data. 

## dplyr
The first package that we will use to wrangle data is `dplyr`. `dplyr` is used to transform data frames by extracting, rearranging, and summarizing data such that they are focused on a question of interest. This is very helpful,  especially when wrangling large data, and makes dplyr one of most frequently used packages in the tidyverse. The two functions we will use most are `select()` and `filter()`.  

These functions are often called verbs, and the format used for each is the same. The output is always a new, more restricted dataframe.  

## `select()`
The verb `select()` allows you to pull out columns of interest from a dataframe; it does not affect the rows. To do this, just add the names of the columns of interest to the `select()` command. The order in which you add them, will determine the order in which they appear in the output.  

For smaller dataframes, `select()` may not make much sense. However, for larger dataframes with many variables, `select()` is very useful. Let's look at the fish data again.
```{r}

```

We are only interested in species and body mass. We can use `select()` to extract these columns.
```{r}

```

To add a range of columns use `start_col:end_col`.
```{r}

```

The ! operator is useful in select. It allows us to select everything except the specified variables.
```{r}

```

Alternatively, you can use the `c()` function to exclude multiple columns.
```{r}

```

For very large data frames with lots of variables, `select()` utilizes lots of different operators to make things easier. Let's say we are only interested in the variables that deal with length.
```{r}

```

`starts_with()`
```{r}

```

`ends_with()`
```{r}

```

You can also select columns based on the class of data.  
```{r}

```

There are a few verbs that go with `select()` because they deal with columns. One of these is `rename()`. `rename()` allows you to rename columns in a dataframe. The format is `new_name = old_name`.
```{r}

```

Alternatively, you can rename from within select.
```{r}

```

The second is `relocate()`. `relocate()` allows you to move columns to different locations within a dataframe. Let's say we want to move `length` to be the first column in the dataframe.
```{r}

```

## Practice  
For these exercises, we will use the `msleep` dataset from the `ggplot2` package. This dataset contains information about the sleep habits of various mammals. [Reference](https://ggplot2.tidyverse.org/reference/msleep.html): V. M. Savage and G. B. West. A quantitative, theoretical framework for understanding mammalian sleep. Proceedings of the National Academy of Sciences, 104 (3):1051-1056, 2007. 

1. What are the names in the `msleep` dataframe?
```{r}

```

2. Use `glimpse()` to get an idea of the structure of the `msleep` dataframe.
```{r}

```

3. Make a new dataframe that only includes the variables `order`, `genus`, and `bodywt.`
```{r}

```

4. What if we are only interested in the numeric variables? Make a new dataframe that is restricted to numerics.
```{r}

```

5. Make a dataframe that includes all variables except `name.`
```{r}

```

## That's it! Let's take a break and then move on to part 2! 

-->[Home](https://jmledford3115.github.io/datascibiol/)  